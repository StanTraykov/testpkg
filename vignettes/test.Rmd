---
title: "test"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{test}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(testpkg)
```

```{r test}
hello()
Sys.setLanguage("bg")
hello()
Sys.setenv(LANGUAGE = "bg")
hello()
```

```{r infoshow}
cat("NLS capability:", capabilities("NLS"), "\n\n")

cat("ENV:\n")
print(Sys.getenv(c("LANGUAGE", "LC_ALL", "LC_MESSAGES", "LANG")))
cat("\nLOCALE:\n")
print(Sys.getlocale())

cat("\nl10n_info():\n")
print(l10n_info())
```

```{r ext}
ok <- Sys.setlocale("LC_MESSAGES", "bg_BG.UTF-8")
ok
hello()

Sys.setlocale("LC_ALL", "bg_BG.UTF-8")
hello()

Sys.setenv(
  LANG = "bg_BG.UTF-8",
  LC_MESSAGES = "bg_BG.UTF-8",
  LANGUAGE = "bg"
)
hello()
```
